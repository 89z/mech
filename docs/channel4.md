# Channel 4

## Android client

~~~
com.channel4.ondemand
~~~

Hard geo block:

~~~
POST /online/v2/auth/token?client=android-mod HTTP/1.1
X-Correlation-Id: ANDROID-7905feec-5b1b-4d95-ab4e-06edfc699951
User-Agent: Dalvik/2.1.0 (Linux; U; Android 7.0; Android SDK built for x86 Build/NYC) C4oD_Android/9.4.5 (uid:73978094-edd6-40f9-abe0-e4d487154024; tid:-; did:Google_Android SDK built for x86_24;)
X-C4-Platform-Name: android
X-C4-Device-Type: mobile
X-C4-Device-Name: Google Android SDK built for x86 (sdk_google_phone_x86)
X-C4-App-Version: android_app:9.4.5
X-C4-Optimizely-Datafile: 1693
Content-Type: application/x-www-form-urlencoded
Content-Length: 103
Host: api.channel4.com
Connection: Keep-Alive
Accept-Encoding: gzip
X-Forwarded-For: 25.0.0.0

grant_type=client_credentials&client_id=36UUCt98VMQvBAgQ27Au8zGHl31N9LQ1&client_secret=JYswyHvGe62VlikW

HTTP/1.1 403 Forbidden
~~~

## Web client

To decrypt, we need the token:

~~~
{
  "request_id": 5406485,
  "token": "Um5zRUl6UGp2Bql5um0iFpnndiNAr5XMCktkZv3SPkcs7m2jhGUeKBgzsfpFXWRnLExQPGZgrvQFvGQkCWI9zVplmUTMP0B18UnkniVdI9SyAIgQ-6oMFBV4mp8f9J9aAtzpyYZ8lkZ9JOzedaXjHm9RbbOei00b",
  "video": {
    "type": "ondemand",
    "url": "https://cf.jos.c4assets.com/CH4_42_6_900_28913001001007_004/CH4_42_6_900_28913001001007_004_J01.ism/stream.mpd?c3.ri=13625402994411341951&mpd_segment_template=time&filter=%28type%3D%3D%22video%22%26%26%28%28DisplayHeight%3E%3D288%29%26%26%28systemBitrate%3C4800000%29%29%29%7C%7Ctype%21%3D%22video%22&ts=1652400620&e=600&st=IKK-vrsstp6gGbiKybu4mMBW-QN7AWnD_KKRQKoHmSk"
  },
  "message": "CAQ="
}
~~~

However this token is generated by JavaScript, so we would need to either
reverse the JavaScript, or manually copy paste from the browser for every video.
Also its possible that the JavaScript is calling the CDM.
